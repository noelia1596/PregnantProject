{"ast":null,"code":"import _regeneratorRuntime from \"C:\\\\Users\\\\Noelia\\\\Desktop\\\\Plantillas\\\\source\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";\nimport _asyncToGenerator from \"C:\\\\Users\\\\Noelia\\\\Desktop\\\\Plantillas\\\\source\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";\n\nvar _marked =\n/*#__PURE__*/\n_regeneratorRuntime.mark(fetchTodoRequest),\n    _marked2 =\n/*#__PURE__*/\n_regeneratorRuntime.mark(fetchTodoConversationRequest),\n    _marked3 =\n/*#__PURE__*/\n_regeneratorRuntime.mark(fetchTodos),\n    _marked4 =\n/*#__PURE__*/\n_regeneratorRuntime.mark(fetchTodoConversation),\n    _marked5 =\n/*#__PURE__*/\n_regeneratorRuntime.mark(rootSaga);\n\nimport { all, call, fork, put, takeEvery } from 'redux-saga/effects';\nimport { fetchTodosConversationSuccess, fetchTodosSuccess, showTodoMessage } from 'actions/ToDo';\nimport { database } from '../firebase/firebase';\nimport { FETCH_ALL_TODO, FETCH_ALL_TODO_CONVERSATION } from 'constants/ActionTypes';\n\nvar getTodos =\n/*#__PURE__*/\nfunction () {\n  var _ref = _asyncToGenerator(\n  /*#__PURE__*/\n  _regeneratorRuntime.mark(function _callee() {\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.next = 2;\n            return database.ref('prod/todo/todos').once('value').then(function (snapshot) {\n              var todos = [];\n              snapshot.forEach(function (rawData) {\n                var todo = rawData.val(); // change object to array\n\n                var labels = [];\n\n                if (todo.labels) {\n                  todo.labels.forEach(function (label) {\n                    return labels.push(label);\n                  });\n                }\n\n                todo.labels = labels;\n                todos.push(todo);\n              });\n              return todos;\n            }).catch(function (error) {\n              return error;\n            });\n\n          case 2:\n            return _context.abrupt(\"return\", _context.sent);\n\n          case 3:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n\n  return function getTodos() {\n    return _ref.apply(this, arguments);\n  };\n}();\n\nvar getTodosConversation =\n/*#__PURE__*/\nfunction () {\n  var _ref2 = _asyncToGenerator(\n  /*#__PURE__*/\n  _regeneratorRuntime.mark(function _callee2() {\n    return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            _context2.next = 2;\n            return database.ref('prod/todo/conversation').once('value').then(function (snapshot) {\n              var conversations = [];\n              snapshot.forEach(function (rawData) {\n                var conversation = rawData.val(); // change object to array\n\n                var conversationDatas = [];\n\n                if (conversation.conversationData) {\n                  conversation.conversationData.forEach(function (conversationData) {\n                    return conversationDatas.push(conversationData);\n                  });\n                }\n\n                conversation.conversationData = conversationDatas;\n                conversations.push(conversation);\n              });\n              return conversations;\n            }).catch(function (error) {\n              return error;\n            });\n\n          case 2:\n            return _context2.abrupt(\"return\", _context2.sent);\n\n          case 3:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2);\n  }));\n\n  return function getTodosConversation() {\n    return _ref2.apply(this, arguments);\n  };\n}();\n\nfunction fetchTodoRequest() {\n  var fetchedTodo;\n  return _regeneratorRuntime.wrap(function fetchTodoRequest$(_context3) {\n    while (1) {\n      switch (_context3.prev = _context3.next) {\n        case 0:\n          _context3.prev = 0;\n          _context3.next = 3;\n          return call(getTodos);\n\n        case 3:\n          fetchedTodo = _context3.sent;\n          _context3.next = 6;\n          return put(fetchTodosSuccess(fetchedTodo));\n\n        case 6:\n          _context3.next = 12;\n          break;\n\n        case 8:\n          _context3.prev = 8;\n          _context3.t0 = _context3[\"catch\"](0);\n          _context3.next = 12;\n          return put(showTodoMessage(_context3.t0));\n\n        case 12:\n        case \"end\":\n          return _context3.stop();\n      }\n    }\n  }, _marked, null, [[0, 8]]);\n}\n\nfunction fetchTodoConversationRequest() {\n  var fetchedTodoConversation;\n  return _regeneratorRuntime.wrap(function fetchTodoConversationRequest$(_context4) {\n    while (1) {\n      switch (_context4.prev = _context4.next) {\n        case 0:\n          _context4.prev = 0;\n          _context4.next = 3;\n          return call(getTodosConversation);\n\n        case 3:\n          fetchedTodoConversation = _context4.sent;\n          _context4.next = 6;\n          return put(fetchTodosConversationSuccess(fetchedTodoConversation));\n\n        case 6:\n          _context4.next = 12;\n          break;\n\n        case 8:\n          _context4.prev = 8;\n          _context4.t0 = _context4[\"catch\"](0);\n          _context4.next = 12;\n          return put(showTodoMessage(_context4.t0));\n\n        case 12:\n        case \"end\":\n          return _context4.stop();\n      }\n    }\n  }, _marked2, null, [[0, 8]]);\n}\n\nexport function fetchTodos() {\n  return _regeneratorRuntime.wrap(function fetchTodos$(_context5) {\n    while (1) {\n      switch (_context5.prev = _context5.next) {\n        case 0:\n          _context5.next = 2;\n          return takeEvery(FETCH_ALL_TODO, fetchTodoRequest);\n\n        case 2:\n        case \"end\":\n          return _context5.stop();\n      }\n    }\n  }, _marked3);\n}\nexport function fetchTodoConversation() {\n  return _regeneratorRuntime.wrap(function fetchTodoConversation$(_context6) {\n    while (1) {\n      switch (_context6.prev = _context6.next) {\n        case 0:\n          _context6.next = 2;\n          return takeEvery(FETCH_ALL_TODO_CONVERSATION, fetchTodoConversationRequest);\n\n        case 2:\n        case \"end\":\n          return _context6.stop();\n      }\n    }\n  }, _marked4);\n}\nexport default function rootSaga() {\n  return _regeneratorRuntime.wrap(function rootSaga$(_context7) {\n    while (1) {\n      switch (_context7.prev = _context7.next) {\n        case 0:\n          _context7.next = 2;\n          return all([fork(fetchTodoConversation), fork(fetchTodos)]);\n\n        case 2:\n        case \"end\":\n          return _context7.stop();\n      }\n    }\n  }, _marked5);\n}","map":{"version":3,"sources":["C:\\Users\\Noelia\\Desktop\\Plantillas\\source\\src\\sagas\\Todo.js"],"names":["fetchTodoRequest","fetchTodoConversationRequest","fetchTodos","fetchTodoConversation","rootSaga","all","call","fork","put","takeEvery","fetchTodosConversationSuccess","fetchTodosSuccess","showTodoMessage","database","FETCH_ALL_TODO","FETCH_ALL_TODO_CONVERSATION","getTodos","ref","once","then","snapshot","todos","forEach","rawData","todo","val","labels","label","push","catch","error","getTodosConversation","conversations","conversation","conversationDatas","conversationData","fetchedTodo","fetchedTodoConversation"],"mappings":"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","sourcesContent":["import {all, call, fork, put, takeEvery} from 'redux-saga/effects';\r\nimport {fetchTodosConversationSuccess, fetchTodosSuccess, showTodoMessage} from 'actions/ToDo';\r\nimport {database} from '../firebase/firebase';\r\nimport {FETCH_ALL_TODO, FETCH_ALL_TODO_CONVERSATION} from 'constants/ActionTypes';\r\n\r\nconst getTodos = async () =>\r\n  await database.ref('prod/todo/todos').once('value')\r\n    .then((snapshot) => {\r\n      const todos = [];\r\n      snapshot.forEach((rawData) => {\r\n        const todo = rawData.val();\r\n\r\n        // change object to array\r\n        const labels = [];\r\n        if (todo.labels) {\r\n          todo.labels.forEach((label) =>\r\n            labels.push(label)\r\n          );\r\n        }\r\n\r\n        todo.labels = labels;\r\n        todos.push(todo);\r\n      });\r\n      return todos;\r\n    })\r\n    .catch(error => error);\r\n\r\nconst getTodosConversation = async () =>\r\n  await database.ref('prod/todo/conversation').once('value')\r\n    .then((snapshot) => {\r\n      const conversations = [];\r\n      snapshot.forEach((rawData) => {\r\n        const conversation = rawData.val();\r\n\r\n        // change object to array\r\n        const conversationDatas = [];\r\n        if (conversation.conversationData) {\r\n          conversation.conversationData.forEach((conversationData) =>\r\n            conversationDatas.push(conversationData)\r\n          );\r\n        }\r\n        conversation.conversationData = conversationDatas;\r\n        conversations.push(conversation);\r\n      });\r\n\r\n      return conversations;\r\n    })\r\n    .catch(error => error);\r\n\r\n\r\nfunction* fetchTodoRequest() {\r\n  try {\r\n    const fetchedTodo = yield call(getTodos);\r\n    yield put(fetchTodosSuccess(fetchedTodo));\r\n  } catch (error) {\r\n    yield put(showTodoMessage(error));\r\n  }\r\n}\r\n\r\nfunction* fetchTodoConversationRequest() {\r\n  try {\r\n    const fetchedTodoConversation = yield call(getTodosConversation);\r\n    yield put(fetchTodosConversationSuccess(fetchedTodoConversation));\r\n  } catch (error) {\r\n    yield put(showTodoMessage(error));\r\n  }\r\n}\r\n\r\nexport function* fetchTodos() {\r\n  yield takeEvery(FETCH_ALL_TODO, fetchTodoRequest);\r\n}\r\n\r\nexport function* fetchTodoConversation() {\r\n  yield takeEvery(FETCH_ALL_TODO_CONVERSATION, fetchTodoConversationRequest);\r\n}\r\n\r\nexport default function* rootSaga() {\r\n  yield all([fork(fetchTodoConversation), fork(fetchTodos)]);\r\n}"]},"metadata":{},"sourceType":"module"}